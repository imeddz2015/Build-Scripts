--- testsuite/nettle-pbkdf2-test.orig	2020-04-01 03:06:12.219810678 -0400
+++ testsuite/nettle-pbkdf2-test	2020-04-01 03:07:11.912666176 -0400
@@ -4,6 +4,18 @@
   srcdir=`pwd`
 fi
 
+if [ -n "$TEST_SHLIB_DIR" ] ; then
+  # Prepend to LD_LIBRARY_PATH, if it is alredy set.
+  LD_LIBRARY_PATH="${TEST_SHLIB_DIR}${LD_LIBRARY_PATH::$LD_LIBRARY_PATH}"
+  # For MACOS
+  DYLD_LIBRARY_PATH="$TEST_SHLIB_DIR"
+  # For Windows
+  PATH="${TEST_SHLIB_DIR}:${PATH}"
+  export LD_LIBRARY_PATH
+  export DYLD_LIBRARY_PATH
+  export PATH
+fi
+
 test_pbkdf2 () {
     password="$1"
     salt="$2"
--- testsuite/sexp-conv-test.orig	2020-04-01 03:06:12.219810678 -0400
+++ testsuite/sexp-conv-test	2020-04-01 03:07:36.341015931 -0400
@@ -4,6 +4,18 @@
   srcdir=`pwd`
 fi
 
+if [ -n "$TEST_SHLIB_DIR" ] ; then
+  # Prepend to LD_LIBRARY_PATH, if it is alredy set.
+  LD_LIBRARY_PATH="${TEST_SHLIB_DIR}${LD_LIBRARY_PATH::$LD_LIBRARY_PATH}"
+  # For MACOS
+  DYLD_LIBRARY_PATH="$TEST_SHLIB_DIR"
+  # For Windows
+  PATH="${TEST_SHLIB_DIR}:${PATH}"
+  export LD_LIBRARY_PATH
+  export DYLD_LIBRARY_PATH
+  export PATH
+fi
+
 print_raw () {
     printf "%s" "$1" > "$2"
 }
--- testsuite/pkcs1-conv-test.orig	2020-04-01 03:06:12.223810735 -0400
+++ testsuite/pkcs1-conv-test	2020-04-01 03:07:55.617291787 -0400
@@ -4,6 +4,18 @@
   srcdir=`pwd`
 fi
 
+if [ -n "$TEST_SHLIB_DIR" ] ; then
+  # Prepend to LD_LIBRARY_PATH, if it is alredy set.
+  LD_LIBRARY_PATH="${TEST_SHLIB_DIR}${LD_LIBRARY_PATH::$LD_LIBRARY_PATH}"
+  # For MACOS
+  DYLD_LIBRARY_PATH="$TEST_SHLIB_DIR"
+  # For Windows
+  PATH="${TEST_SHLIB_DIR}:${PATH}"
+  export LD_LIBRARY_PATH
+  export DYLD_LIBRARY_PATH
+  export PATH
+fi
+
 [ -x ../tools/pkcs1-conv$EXEEXT ] || exit 77
 
 # Private RSA key, generated by openssl
